# Реализация системы фонарика и тумана войны

## Созданные файлы

1. **PlayerFlashlight.cs** - скрипт, управляющий фонариком игрока:
   - Включение/выключение фонарика по нажатию клавиши F
   - Настройка параметров освещения (дальность, угол, интенсивность)

2. **FogOfWar.cs** - основной менеджер системы тумана войны:
   - Управляет затемнением игрового мира
   - Передает параметры фонарика в шейдер
   - Определяет, находится ли объект в зоне видимости фонарика

3. **EnemyVisibility.cs** - скрипт, управляющий видимостью врагов:
   - Скрывает врагов в темноте
   - Плавно показывает врагов при освещении фонариком
   - Автоматически добавляется к врагам при их создании

4. **FogOfWarShader.shader** - шейдер для визуализации тумана войны:
   - Создает эффект затемнения игрового поля
   - Формирует конус света от фонарика
   - Управляет интенсивностью затемнения

## Изменения в существующих файлах

1. **EnemyAI.cs** - модифицирован для изменения поведения врагов в тумане войны:
   - Уменьшенный радиус обнаружения игрока в темноте
   - Взаимодействие с системой тумана войны

2. **EnemySpawner.cs** - модифицирован для автоматического добавления компонента EnemyVisibility:
   - При создании врага автоматически добавляется компонент для управления его видимостью

3. **UpgradeManager.cs** - добавлены улучшения для фонарика:
   - Увеличение дальности света
   - Увеличение угла освещения

## Как это работает

1. **Затемнение игрового мира:**
   - На сцене создается плоскость, покрывающая всю игровую область
   - К плоскости применяется специальный шейдер, который создает эффект тумана войны
   - Шейдер рисует темную полупрозрачную область, кроме места, где светит фонарик

2. **Видимость врагов:**
   - Враги становятся видимыми только когда находятся в зоне действия фонарика
   - Реализована плавная анимация появления/исчезновения врагов
   - Враги имеют пониженный радиус обнаружения игрока, когда находятся в темноте

3. **Улучшения фонарика:**
   - Игрок может улучшать параметры фонарика за очки
   - Доступны улучшения дальности света и угла освещения

## Преимущества реализации

- **Атмосферность** - затемнение придает игре атмосферу напряженности и страха
- **Тактический элемент** - игрок должен стратегически использовать фонарик
- **Гибкость настройки** - легко настраиваемые параметры для баланса игры
- **Расширяемость** - возможность добавления новых эффектов и улучшений

## Возможные расширения

- Добавление нескольких режимов фонарика (узкий луч/широкий конус)
- Ограниченная батарея фонарика с возможностью подзарядки
- Специальные враги, реагирующие на свет особым образом
- Визуальные эффекты для фонарика (мерцание, разные цвета) 