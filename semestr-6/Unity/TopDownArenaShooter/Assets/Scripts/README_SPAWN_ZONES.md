# Инструкция по настройке системы зон спавна врагов

## Обзор системы

Система зон спавна позволяет задать определенные области на карте, где будут появляться враги, вместо случайного появления вокруг игрока. Это обеспечивает более предсказуемый и сбалансированный геймплей, защищая базу от слишком быстрого появления врагов рядом с ней.

## Компоненты системы

Система состоит из трех основных компонентов:

1. **SpawnZone** - компонент, определяющий область спавна врагов
2. **SpawnZoneManager** - менеджер, управляющий всеми зонами спавна
3. **EnemySpawner** - обновленный механизм спавна врагов, использующий зоны спавна

## Создание зон спавна

### Шаг 1: Создание объекта зоны

1. Создайте пустой GameObject в сцене:
   - Правый клик в Hierarchy -> Create Empty
   - Назовите его `SpawnZone_1` (или другое подходящее имя)
   - Расположите его в месте, где вы хотите создать зону спавна

2. Добавьте коллайдер, определяющий границы зоны:
   - Add Component -> Box Collider
   - Увеличьте размер коллайдера, чтобы он охватывал нужную область
   - Установите флажок "Is Trigger", чтобы коллайдер не влиял на физику

3. Добавьте компонент `SpawnZone`:
   - Add Component -> Scripts -> SpawnZone
   - Настройте параметры:
     - Gizmo Size: размер отображения в редакторе (например, 1)
     - Gizmo Color: цвет отображения в редакторе (например, красный)
     - Is Active Zone: активна ли зона (true/false)
     - Min Distance From Base: минимальное расстояние от базы (например, 15)

### Шаг 2: Повторите для других зон

Повторите шаг 1 для создания всех нужных зон спавна. Рекомендуется размещать зоны на достаточном расстоянии от базы и в разных направлениях.

### Шаг 3: Создание SpawnZoneManager

1. Создайте пустой GameObject в сцене:
   - Правый клик в Hierarchy -> Create Empty
   - Назовите его `SpawnZoneManager`

2. Добавьте компонент `SpawnZoneManager`:
   - Add Component -> Scripts -> SpawnZoneManager
   - Настройте параметры:
     - All Spawn Zones: перетащите все созданные зоны спавна
     - Activate All Zones At Start: активировать ли все зоны при запуске (true/false)
     - Use Progressive Activation: использовать ли постепенную активацию зон (true/false)
     - Time To Activate All Zones: время до активации всех зон (если используется постепенная активация)

### Шаг 4: Настройка EnemySpawner

1. Найдите объект с компонентом `EnemySpawner` в вашей сцене.

2. Настройте параметры зон спавна:
   - Use Spawn Zones: включает использование зон спавна вместо случайного спавна
   - Spawn Zones: оставьте пустым, они будут найдены автоматически
   - Min Distance From Player: минимальное расстояние от игрока при спавне

## Взаимодействие между компонентами

- `SpawnZone` определяет границы, где могут появляться враги
- `SpawnZoneManager` управляет активацией/деактивацией зон в зависимости от игрового прогресса
- `EnemySpawner` выбирает случайную активную зону для спавна врагов

## Советы по настройке

1. **Настройка зон:**
   - Создавайте зоны разных размеров и форм
   - Размещайте их на достаточном расстоянии от базы (15-20 единиц)
   - Убедитесь, что коллайдеры зон не перекрываются с препятствиями

2. **Оптимальное количество зон:**
   - Для маленькой карты: 3-5 зон
   - Для средней карты: 5-8 зон
   - Для большой карты: 8-12 зон

3. **Прогрессивная активация:**
   - Полезна для постепенного увеличения сложности
   - Начните с 1-2 дальних зон и постепенно добавляйте более близкие
   - Настройте `timeToActivateAllZones` в соответствии с ожидаемой продолжительностью игры

## Отладка и визуализация

- В режиме редактора зоны спавна отображаются как прозрачные кубы с цветом, указанным в параметрах
- Вы можете временно увеличить значение `gizmoSize` для лучшей видимости зон
- Для проверки работы системы установите `Debug.Log` в методе `GetSpawnPosition` в `EnemySpawner`

## Расширенное использование

### Программное управление зонами

```csharp
// Получение ссылки на менеджер зон
SpawnZoneManager zoneManager = FindObjectOfType<SpawnZoneManager>();

// Активация всех зон
zoneManager.ActivateAllZones();

// Деактивация всех зон
zoneManager.DeactivateAllZones();

// Получение списка активных зон
List<SpawnZone> activeZones = zoneManager.GetActiveZones();

// Активация конкретной зоны
SpawnZone myZone = activeZones[0];
zoneManager.ActivateZone(myZone);

// Деактивация конкретной зоны
zoneManager.DeactivateZone(myZone);
``` 