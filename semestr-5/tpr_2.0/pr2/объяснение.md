# Пример ручного расчёта алгоритма имитации отжига для задачи Коммивояжера

В этом примере рассматривается работа алгоритма имитации отжига для решения задачи Коммивояжера. Мы вручную рассмотрим три итерации и вычислим, как алгоритм выбирает новые маршруты и изменяет "температуру" при каждой итерации.

## Исходные данные

Для простоты возьмём три города с условными координатами:
- Город A: (0, 0)
- Город B: (3, 4)
- Город C: (6, 0)

Маршрут будет представлять замкнутый круг, например $A \rightarrow B \rightarrow C \rightarrow A$. Мы начнем с расчёта начального маршрута и будем выполнять три итерации отжига.

### Шаг 1: Начальный маршрут и расстояние

1. **Начальный маршрут**: A → B → C → A.
2. **Расчёт начального расстояния**:
   - Расстояние между $A$ и $B$: $\sqrt{(3-0)^2 + (4-0)^2} = 5$.
   - Расстояние между $B$ и $C$: $\sqrt{(6-3)^2 + (0-4)^2} = 5$.
   - Расстояние между $C$ и $A$: $\sqrt{(6-0)^2 + (0-0)^2} = 6$.
   - **Общее расстояние**: $5 + 5 + 6 = 16$.

3. **Температура**: Установим начальную температуру, например, 100, и коэффициент охлаждения 0.9.

### Шаг 2: Итерация 1

1. **Температура**: $T = 100$.
2. **Генерация нового маршрута**: Поменяем местами города $B$ и $C$. Новый маршрут: $A \rightarrow C \rightarrow B \rightarrow A$.
3. **Расчёт нового расстояния**:
   - Расстояние между $A$ и $C$: 6.
   - Расстояние между $C$ и $B$: 5.
   - Расстояние между $B$ и $A$: 5.
   - **Новое общее расстояние**: $6 + 5 + 5 = 16$.

4. **Принятие решения**: Поскольку новое расстояние не лучше, но такое же, мы можем случайным образом принять или отвергнуть новый маршрут. Допустим, мы примем новый маршрут.
5. **Охлаждение**: $T = 100 \times 0.9 = 90$.

### Шаг 3: Итерация 2

1. **Температура**: $T = 90$.
2. **Генерация нового маршрута**: Опять меняем местами города $A$ и $C$. Новый маршрут: $C \rightarrow A \rightarrow B \rightarrow C$.
3. **Расчёт нового расстояния**:
   - Расстояние между $C$ и $A$: 6.
   - Расстояние между $A$ и $B$: 5.
   - Расстояние между $B$ и $C$: 5.
   - **Новое общее расстояние**: $6 + 5 + 5 = 16$.

4. **Принятие решения**: Поскольку новое расстояние совпадает с предыдущим, проверим вероятность. Вероятность принять более длинный маршрут: $e^{(16 - 16) / 90} = 1$ — мы можем принять его.
5. **Охлаждение**: $T = 90 \times 0.9 = 81$.

### Шаг 4: Итерация 3

1. **Температура**: $T = 81$.
2. **Генерация нового маршрута**: Меняем местами $B$ и $A$. Новый маршрут: $B \rightarrow C \rightarrow A \rightarrow B$.
3. **Расчёт нового расстояния**:
   - Расстояние между $B$ и $C$: 5.
   - Расстояние между $C$ и $A$: 6.
   - Расстояние между $A$ и $B$: 5.
   - **Новое общее расстояние**: $5 + 6 + 5 = 16$.

4. **Принятие решения**: Так как новое расстояние не хуже, алгоритм может его принять.
5. **Охлаждение**: $T = 81 \times 0.9 = 72.9$.

### Результат

После трёх итераций маршрут и расстояние остаются прежними, так как все маршруты равны по длине. Но, по мере уменьшения температуры, алгоритм будет реже принимать менее выгодные варианты, что при больших расстояниях и других параметрах будет помогать постепенно находить более оптимальный путь.
